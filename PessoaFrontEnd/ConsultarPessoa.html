<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Consultar Pessoa</title>
    <link rel="stylesheet" href="../CSS/bootstrap.css">
    <link rel="stylesheet" href="../CSS/menuAplicativoPessoa.css">
    <link rel="stylesheet" href="../CSS/formularioAplicativoPessoa.css">
    <link rel="stylesheet" href="../CSS/jquery.dataTables.min.css">
    <script type="text/javascript" src="../Scripts/bootstrap.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="../Scripts/jquery.mask.js"></script>
    <script type="text/javascript" src="../Scripts/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="../Scripts/consultarPessoa.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#cep").mask("00000-000");
            $("#cpf").mask("000.000.000-00");

            //Cria a tabela vazia
            dtListaPessoa = CriarDataTableListaPessoa();

            $("#btnConsultar").click(function () {
                //Obtém os dados de filtro do formulário
                var cpfPessoa = $('#cpf').val();
                var nomePessoa = $('#nome').val();
                var sobrenomePessoa = $('#sobrenome').val();
                var nacionalidadePessoa = $('#nacionalidade').val();
                var cepPessoa = $('#cep').val();
                var estadoPessoa = $('#estado').val();
                var cidadePessoa = $('#cidade').val();
                var logradouroPessoa = $('#logradouro').val();
                var emailPessoa = $('#email').val();
                var telefonePessoa = $('#telefone').val();

                //Carrega os dados de lista de pessoas filtrado pelos parâmetros do formulário
                var sJSON = servico_Consultar_PESSOA(cpfPessoa, nomePessoa, sobrenomePessoa, nacionalidadePessoa, cepPessoa, estadoPessoa, cidadePessoa, logradouroPessoa, emailPessoa, telefonePessoa);

                //Cria a tabela vazia
                dtListaPessoa = CriarDataTableListaPessoa();

                //Preenche a tabela com os dados do JSON
                dtListaPessoa.clear().rows.add(sJSON).draw();
            });
        });
    </script>
</head>

<body>
    <div class="topnav">
        <a href="Inicio.html">Inicio</a>
        <a class="active" href="#">Consultar Pessoa</a>
        <a href="IncluirPessoa.html">Incluir Pessoa</a>
        <a href="ListarPessoa.html">Listar Pessoas</a>
    </div>

    <div style="padding-left:16px">
        <br />
        <br />
        <h2>Consultar Pessoa</h2>
        <br />
        <p>Inserir opções de pesquisa para consultar pessoa</p>
        <br />
    </div>

    <div class="container">
        <form>
            <div class="row">
                <div class="col">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" name="cpf" placeholder="CPF..">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="nome">Nome</label>
                    <input type="text" id="nome" name="nome" placeholder="Primeiro nome..">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="sobrenome">Sobrenome</label>
                    <input type="text" id="sobrenome" name="sobrenome" placeholder="Sobrenome..">
                </div>

                <div class="col">
                    <label for="nacionalidade">Nacionalidade</label>
                    <input type="text" id="nacionalidade" name="nacionalidade" placeholder="Nacionalidade..">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="cep">CEP</label>
                    <input type="text" id="cep" name="cep" placeholder="CEP..">
                </div>

                <div class="col">
                    <label for="estado">Estado</label>
                    <input type="text" id="estado" name="estado" placeholder="Estado..">
                </div>

                <div class="col">
                    <label for="cidade">Cidade</label>
                    <input type="text" id="cidade" name="cidade" placeholder="Cidade..">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="logradouro">Logradouro</label>
                    <input type="text" id="logradouro" name="logradouro" placeholder="Logradouro..">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="email">E-mail</label>
                    <input type="text" id="email" name="email" placeholder="E-mail..">
                </div>

                <div class="col">
                    <label for="telefone">Telefone</label>
                    <input type="text" id="telefone" name="telefone" placeholder="Telefone..">
                </div>
            </div>
            
            <button type="button" id="btnConsultar" class="btn btn-success">Consultar</button>            
        </form>
    </div>

    <br />
    <br />

    <div id="divListaPessoa">       
        <table id="id_LISTA_PESSOA" class="display">
            <thead>
                <tr>
                    <th>CPF</th>
                    <th>Nome</th>
                    <th>Sobrenome</th>
                    <th>Nacionalidade</th>
                    <th>CEP</th>
                    <th>Estado</th>
                    <th>Cidade</th>
                    <th>Logradouro</th>
                    <th>E-mail</th>
                    <th>Telefone</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</body>

</html>

